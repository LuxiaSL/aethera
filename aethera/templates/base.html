<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ title | default("æthera") }}{% endblock %}</title>

    <!-- Favicon -->
    <link rel="icon" type="image/ico" href="/static/favicon.ico">

    <!-- Meta tags and SEO -->
    {% block meta %}
    <meta name="description"
        content="{% block description %}thoughts, fragments, and transmissions from the digital aether{% endblock %}">
    {% if canonical_url %}
    <link rel="canonical" href="{{ canonical_url }}">
    {% endif %}
    <meta name="license" content="CC BY 4.0">
    <meta name="robots" content="index, follow, max-image-preview:large">
    <link rel="alternate" type="application/rss+xml" title="æthera RSS Feed" href="/feed.xml" />
    
    <!-- Open Graph (default for homepage) -->
    <meta property="og:title" content="æthera">
    <meta property="og:description" content="thoughts, fragments, and transmissions from the digital aether">
    <meta property="og:url" content="{{ request.base_url }}">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="æthera">
    <meta property="og:image" content="{{ request.base_url }}static/uploads/og-card.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    
    <!-- Twitter/X Card (default for homepage) -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@slLuxia">
    <meta name="twitter:creator" content="@slLuxia">
    <meta name="twitter:title" content="æthera">
    <meta name="twitter:description" content="thoughts, fragments, and transmissions from the digital aether">
    <meta name="twitter:image" content="{{ request.base_url }}static/uploads/og-card.png">
    <meta name="twitter:image:alt" content="æthera logo">
    
    <!-- oEmbed Discovery -->
    <link rel="alternate" type="application/json+oembed" href="{{ request.base_url }}oembed?url={{ request.url }}&format=json" title="æthera oEmbed">
    
    <!-- Theme Color (browser chrome, PWA) -->
    <meta name="theme-color" content="#000000">
    <meta name="msapplication-TileColor" content="#000000">
    
    <!-- Search Engine Verification (uncomment and add your codes) -->
    <!-- <meta name="google-site-verification" content="YOUR_GOOGLE_VERIFICATION_CODE" /> -->
    <!-- <meta name="msvalidate.01" content="YOUR_BING_VERIFICATION_CODE" /> -->
    {% endblock %}

    <!-- Schema.org structured data -->
    {% block schema %}
    {% if post is defined %}
    <!-- BlogPosting schema for post pages -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "headline": "{{ post.title }}",
        "datePublished": "{{ post.created_at.isoformat() }}",
        "dateModified": "{{ post.updated_at.isoformat() }}",
        "author": {
            "@type": "Person",
            "name": "{{ post.author }}",
            "url": "{{ request.base_url }}"
        },
        "publisher": {
            "@type": "Person",
            "name": "Luxia",
            "url": "{{ request.base_url }}"
        },
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "{% if post.canonical_url %}{{ post.canonical_url }}{% else %}{{ request.url }}{% endif %}"
        },
        {% if post.excerpt %}
        "description": "{{ post.excerpt | replace('"', '\\"') }}",
        {% endif %}
        {% if post.tags %}
        "keywords": "{{ post.tags }}",
        {% endif %}
        "inLanguage": "en",
        "license": "https://creativecommons.org/licenses/by/4.0/",
        "isAccessibleForFree": true,
        "url": "{% if post.canonical_url %}{{ post.canonical_url }}{% else %}{{ request.url }}{% endif %}"
    }
    </script>
    {% else %}
    <!-- Blog schema for home/index page -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Blog",
        "name": "æthera",
        "description": "thoughts, fragments, and transmissions from the digital aether",
        "url": "{{ request.base_url }}",
        "inLanguage": "en",
        "license": "https://creativecommons.org/licenses/by/4.0/",
        "author": {
            "@type": "Person",
            "name": "Luxia",
            "url": "{{ request.base_url }}"
        }
    }
    </script>
    {% endif %}
    {% endblock %}

    <!-- Local Fonts (relies on system fonts or locally served if added later) -->

    <!-- Tailwind CSS (Local) -->
    <link href="/static/vendor/css/tailwind.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/static/css/branding.css" rel="stylesheet">

    <!-- HTMX (Local) -->
    <script src="/static/vendor/js/htmx.min.js"></script>

    {% block extra_head %}{% endblock %}
</head>

<body class="bg-bg text-text">
    <header class="w-full">
        <div class="header-content">
            <a href="/" class="site-logo" aria-label="æthera home">
                <img src="/static/uploads/aethera_trimmed.png" alt="æthera" class="site-logo-img">
            </a>
        </div>
    </header>

    <main>
        {% block content %}{% endblock %}
    </main>

    <footer class="mt-16 py-8 text-center text-sm">
        <p>
            <a href="/feed.xml">RSS</a>
            ·
            <a href="/llms.txt">llms.txt</a>
            ·
            <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>
        </p>
    </footer>

    {% block scripts %}{% endblock %}
</body>

</html>